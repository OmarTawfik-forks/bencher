import TestbedCreate from "../testbed-create.mdx";
import ThresholdCreateStatistical from "../threshold-create-statistical.mdx";
import RunMainStatistical from "../run-main-statistical.mdx";
import RunFeatureStatistical from "../run-feature-statistical.mdx";

## Benchmarking Continu Statistique

En reprenant l√† o√π nous nous √©tions arr√™t√©s dans les tutoriels 
[D√©marrage Rapide][quick start] et [Auto-h√©bergement avec Docker][docker self-hosted],
ajoutons le Benchmarking [Continu Statistique][continuous benchmarking] √† notre projet `Save Walter White`.

> üê∞ Assurez-vous d'avoir
> [cr√©√© un jeton API et de l'avoir d√©fini comme variable d'environnement `BENCHER_API_TOKEN`][create an api token]
> avant de continuer !

Premi√®rement, nous devons cr√©er une nouvelle Plateforme de Test pour repr√©senter nos ex√©cuteurs CI, judicieusement nomm√©e `ci-runner`.

<TestbedCreate />

1. Utilisez la sous-commande CLI `bencher testbed create`.
   Voir [la documentation de `testbed create`][testbed create] pour plus de d√©tails.
   (ex : `bencher testbed create`)
2. D√©finissez l'option `--name` sur le nom souhait√© pour la Plateforme de Test.
   (ex : `--name ci-runner`)
3. Sp√©cifiez l'argument du projet comme le slug du projet `Save Walter White`.
   (ex : `save-walter-white-1234abcd`)

Ensuite, nous devons cr√©er un nouveau [Seuil][thresholds] pour notre Plateforme de Test `ci-runner` :

<ThresholdCreateStatistical />

1. Utilisez la sous-commande CLI `bencher threshold create`.
   Voir [la documentation de `threshold create`][threshold create] pour plus de d√©tails.
   (ex : `bencher threshold create`)
2. D√©finissez l'option `--branch` sur la branche principale `main`.
   (ex : `--branch main`)
3. D√©finissez l'option `--branch` pour la nouvelle Plateforme de Test `ci-runner`.
   (ex : `--testbed ci-runner`)
4. D√©finissez l'option `--measure` sur la mesure int√©gr√©e `Latency` g√©n√©r√©e par `bencher mock`.
   Voir [la d√©finition de Mesure][measure] pour les d√©tails.
   (ex: `--measure Latency`)
5. D√©finissez l'option `--test` pour un Seuil de `t-test`.
   Voir [Seuils & Alertes][t-test] pour un aper√ßu complet.
   (ex : `--test t-test`)
6. D√©finissez l'option `--upper-boundary` sur une Limite Sup√©rieure de `0.95`.
   Voir [Seuils & Alertes][t-test upper boundary] pour un aper√ßu complet.
   (ex : `--upper-boundary 0.95`)
7. Sp√©cifiez l'argument du projet comme le slug du projet `Save Walter White`.
   (ex : `save-walter-white-1234abcd`)

Nous sommes maintenant pr√™ts √† ex√©cuter nos benchmarks dans CI.
Comme chaque environnement CI est un peu diff√©rent, 
l'exemple suivant est destin√© √† √™tre plus illustratif que pratique.
Pour des exemples plus sp√©cifiques, voir [Benchmarking Continu dans GitHub Actions][github actions]
et [Benchmarking Continu dans GitLab CI/CD][gitlab ci/cd].

Nous devons cr√©er et maintenir une base de r√©f√©rence historique pour notre branche `main` en benchmarkant chaque changement dans CI :

<RunMainStatistical />

1. Utilisez la sous-commande CLI <code><a href="/fr/docs/explanation/bencher-run/">bencher run</a></code>
   pour ex√©cuter les benchmarks de votre branche `feature-branch`.
   Voir [la sous-commande CLI `bencher run`][bencher run] pour un aper√ßu complet.
   (ex : `bencher run`)
2. D√©finissez l'option `--project` sur le slug du Projet.
   Voir [la documentation de `--project`][project option] pour plus de d√©tails.
   (ex : `--project save-walter-white-1234abcd`)
3. D√©finissez l'option `--branch` sur le nom de la branche principale.
   Voir [s√©lection de branche][branch selection branch] pour un aper√ßu complet.
   (ex : `--branch main`)
4. D√©finissez l'option `--testbed` sur le nom de la Plateforme de Test.
   Voir [la documentation de `--tested`][testbed option] pour plus de d√©tails.
   (ex : `--testbed ci-runner`)
5. D√©finissez l'option `--adapter` sur l'adaptateur de harnais de benchmark souhait√©.
   Voir [adaptateurs de harnais de benchmark][adapters] pour un aper√ßu complet.
   (ex : `--adapter json`)
6. D√©finissez le drapeau `--err` pour √©chouer la commande si une Alerte est g√©n√©r√©e.
   Voir [Seuil & Alertes][alerts] pour un aper√ßu complet.
   (ex : `--err`)
7. Sp√©cifiez les arguments de la commande de benchmark.
   Voir [commande de benchmark][command argument] pour un aper√ßu complet.
   (ex : `bencher mock`)

Enfin, nous sommes pr√™ts √† d√©tecter les r√©gressions de performance dans CI.
Voici comment nous suivrions la performance d'une nouvelle branche de fonctionnalit√©s, nomm√©e `feature-branch`, dans CI :

<RunFeatureStatistical />

1. Utilisez la sous-commande CLI <code><a href="/fr/docs/explanation/bencher-run/">bencher run</a></code>
   pour ex√©cuter les benchmarks de votre branche `feature-branch`.
   Voir [la sous-commande CLI `bencher run`][bencher run] pour un aper√ßu complet.
   (ex : `bencher run`)
2. D√©finissez l'option `--project` sur le slug du Projet.
   Voir [la documentation de `--project`][project option] pour plus de d√©tails.
   (ex : `--project save-walter-white-1234abcd`)
3. D√©finissez l'option `--branch` sur le nom de la branche de la fonctionnalit√©.
   Voir [s√©lection de branche][branch selection branch] pour un aper√ßu complet.
   (ex : `--branch feature-branch`)
4. D√©finissez l'option `--branch-start-point` sur le point de d√©part de la branche de la fonctionnalit√©.
   Voir [s√©lection de branche][branch selection start point] pour un aper√ßu complet.
   (ex : `--branch-start-point main`)
5. D√©finissez l'option `--branch-start-point-hash` sur le `hash` `git` du point de d√©part de la branche de la fonctionnalit√©.
   Voir [s√©lection de branche][branch selection start point hash] pour un aper√ßu complet.
   (ex : `--branch-start-point-hash 32ae...dd8b`)
6. D√©finissez l'option `--testbed` sur le nom de la Plateforme de Test.
   Voir [la documentation de `--tested`][testbed option] pour plus de d√©tails.
   (ex : `--testbed ci-runner`)
7. D√©finissez l'option `--adapter` sur l'adaptateur de harnais de benchmark souhait√©.
   Voir [adaptateurs de harnais de benchmark][adapters] pour un aper√ßu complet.
   (ex : `--adapter json`)
8. D√©finissez le drapeau `--err` pour √©chouer la commande si une Alerte est g√©n√©r√©e.
   Voir [Seuil & Alertes][alerts] pour un aper√ßu complet.
   (ex : `--err`)
9. Sp√©cifiez les arguments de la commande de benchmark.
   Voir [commande de benchmark][command argument] pour un aper√ßu complet.
   (ex : `bencher mock`)

La premi√®re fois que cette commande est ex√©cut√©e dans CI,
elle cr√©era la branche `feature-branch` puisqu'elle n'existe pas encore.
La nouvelle branche `feature-branch` utilisera la branche `main`
au hash `32aea434d751648726097ed3ac760b57107edd8b` comme point de d√©part.
Cela signifie que la branche `feature-branch` aura une copie de toutes les donn√©es et [Seuils][thresholds]
de la branche `main` pour comparer les r√©sultats de `bencher mock` contre,
pour la premi√®re ex√©cution et toutes les suivantes.

[quick start]: /fr/docs/tutorial/quick-start/
[docker self-hosted]: /fr/docs/tutorial/docker/
[continuous benchmarking]: /fr/docs/explanation/continuous-benchmarking/
[create an api token]: /fr/docs/tutorial/quick-start/#create-an-api-token
[testbed create]: /fr/docs/api/projects/testbeds/#post-v0projectsprojecttestbeds
[thresholds]: /fr/docs/explanation/thresholds/
[threshold create]: /fr/docs/api/projects/thresholds/#post-v0projectsprojectthresholds
[measure]: /fr/docs/explanation/benchmarking/#measures
[t-test]: /fr/docs/explanation/thresholds/#t-test-thresholds
[t-test upper boundary]: /fr/docs/explanation/thresholds/#t-test-threshold-upper-boundary
[github actions]: /fr/docs/how-to/github-actions/
[gitlab ci/cd]: /fr/docs/how-to/gitlab-ci-cd/
[bencher run]: /fr/docs/explanation/bencher-run/
[project option]: /fr/docs/explanation/bencher-run/#--project-project
[branch selection branch]: /fr/docs/explanation/branch-selection/#--branch-branch
[testbed option]: /fr/docs/explanation/bencher-run/#--testbed-testbed
[adapters]: /fr/docs/explanation/adapters/
[alerts]: /fr/docs/explanation/thresholds/#alerts
[command argument]: /fr/docs/explanation/bencher-run/#benchmark-command
[branch selection start point]: /fr/docs/explanation/branch-selection/#--branch-start-point-branch
[branch selection start point hash]: /fr/docs/explanation/branch-selection/#--branch-start-point-hash-hash