## Benchmarking Diesel

Diesels [erster Commit][github diesel first commit] wurde am 23. August 2015 vom Projektersteller [Sage Griffin][github sgrif] vorgenommen.
Dies war nur drei Monate nach der [Veröffentlichung von Rust 1.0][rust v1],
so dass sie ursprünglich das eingebaute [libtest bench][libtest bench] Benchmarking-Framework nutzten.
Dann, [am 03. November 2020][github diesel 2507], wechselten sie zu [Criterion][criterion] als ihr Benchmarking-Framework.

Als Diesel zu Criterion wechselte,
begannen sie auch, [sich selbst gegen andere Rust-ORMs zu benchmarken][github diesel bench].
Diese Benchmark-Vergleichssuite umfasst jetzt:

- [Diesel][github diesel]
- [SQLx][github sqlx]
- [Rustorm][github rustorm]
- [Quaint][github quaint]
- [Postgres][github postgres]
- [Rusqlite][github rusqlite]
- [Mysql][github mysql]
- [diesel-async][github diesel async]
- [wtx][github wtx]
- [SeaORM][github seaorm]

Es dauerte bis zum 05. Mai 2021, bis der Beitragende und jetzige Hauptmaintainer
[Georg Semmler][github weiznich] begann, die Diesel-Benchmark-Ergebnisse über die Zeit hinweg zu verfolgen.
Er erstellte [eine nächtliche GitHub Action][github actions diesel metrics], um die Benchmarks auszuführen
und [ein separates Metriken-Repo][github diesel metrics], um die Benchmark-Ergebnisse zu verfolgen.
Aufgrund der Rauscheffekte der GitHub Action Runner werden diese Ergebnisse nur verwendet, um allgemeine Trends bei großen Änderungen zu zeigen.
Es gibt auch keine Überwachungssetup, so dass die Diesel-Maintainer die Ergebnisse manuell überprüfen müssen, um eine Leistungsregression zu erkennen.

Um ein noch besseres Verständnis der Leistungsauswirkungen einer Änderung zu bekommen,
wurde [am 20. März 2022][github diesel 3103]
ein auf Anweisungszählung basierendes Benchmarking [mit `criterion-perf-events`][github criterion perf events] hinzugefügt.
Da `criterion-perf-events` Linux `perf`-Ereignisse verwendet, kann es nicht in GitHub Actions ausgeführt werden.
Daher müssen diese Benchmarks lokal ausgeführt werden.

[github diesel first commit]: https://github.com/diesel-rs/diesel/commit/b6b65709ae0c4591713d286273afc293f4e36ca1
[github sgrif]: https://github.com/sgrif
[rust v1]: https://blog.rust-lang.org/2015/05/15/Rust-1.0.html
[github diesel 2507]: https://github.com/diesel-rs/diesel/pull/2507
[github diesel bench]: https://github.com/diesel-rs/diesel/tree/master/diesel_bench
[github diesel]: https://github.com/diesel-rs/diesel
[github sqlx]: https://github.com/launchbadge/sqlx
[github rustorm]: https://github.com/ivanceras/rustorm
[github quaint]: https://github.com/prisma/quaint
[github postgres]: https://github.com/sfackler/rust-postgres
[github rusqlite]: https://github.com/rusqlite/rusqlite
[github mysql]: https://github.com/blackbeam/rust-mysql-simple
[github diesel async]: https://github.com/weiznich/diesel_async
[github wtx]: https://github.com/c410-f3r/wtx
[github seaorm]: https://github.com/SeaQL/sea-orm
[github weiznich]: https://github.com/weiznich
[github diesel metrics]: https://github.com/diesel-rs/metrics
[github actions diesel metrics]: https://github.com/diesel-rs/diesel/commit/f585d63ce573259fc848ff2d561fe5e86faadd6e
[github criterion perf events]: https://github.com/jbreitbart/criterion-perf-events
[github diesel 3103]: https://github.com/diesel-rs/diesel/pull/3103

[libtest bench]: /de/learn/benchmarking/rust/libtest-bench/
[criterion]: /de/learn/benchmarking/rust/criterion/
