---
import { Image } from "astro:assets";

import { BENCHER_GITHUB_URL, BENCHER_WORDMARK } from "../../util/ext";
import BENCHER_NAVBAR_ID, {
	BENCHER_NAVBAR_BURGER_ID,
	BENCHER_NAVBAR_MENU_ID,
} from "./id";
import ThemeToggle from "./theme/ThemeToggle.astro";
---

<nav
	id={BENCHER_NAVBAR_ID}
	class="navbar"
	role="navigation"
	aria-label="main navigation"
>
	<div class="navbar-brand">
		<a
			class="navbar-item"
			title="Bencher - Continuous Benchmarking"
			href="/"
		>
			<Image src={BENCHER_WORDMARK} width="150" height="28.25" alt="🐰 Bencher" />
		</a>

		<button
			id={BENCHER_NAVBAR_BURGER_ID}
			class="navbar-burger"
      		type="button"
			aria-label="menu"
			aria-expanded="false"
		>
			<span aria-hidden="true" />
			<span aria-hidden="true" />
			<span aria-hidden="true" />
		</button>
	</div>

	<div class="navbar-menu" id={BENCHER_NAVBAR_MENU_ID}>
		<div class="navbar-start">
			<a class="navbar-item" href="/docs/">
				Docs
			</a>

			<a class="navbar-item" href="/explore/">
				Explore
			</a>
			<a class="navbar-item" href="/pricing/">
				Pricing
			</a>
			<a
				class="navbar-item"
				href={BENCHER_GITHUB_URL}
				target="_blank"
				rel="noreferrer"
			>
				GitHub
			</a>
		</div>

		<div class="navbar-end">
			<div class="navbar-item">
				<ThemeToggle />
			</div>

			<div class="navbar-item">
				<div class="navbar-item">
					<a class="button is-outlined" href="/help/">
						<span class="icon has-text-primary">
							<i class="fas fa-life-ring" aria-hidden="true" />
						</span>
						<span>Help</span>
					</a>
				</div>
				<div class="navbar-item" />
				<div class="buttons">
					<a class="button is-light" href="/auth/login">
						Log in
					</a>
					<a class="button is-primary" href="/auth/signup">
						<strong>Sign up</strong>
					</a>
				</div>
			</div>
		</div>
	</div>
</nav>
<script >
	import { BENCHER_NAVBAR_BURGER_ID, BENCHER_NAVBAR_MENU_ID }  from "./id";

	const burger = document.getElementById(BENCHER_NAVBAR_BURGER_ID);
	const menu = document.getElementById(BENCHER_NAVBAR_MENU_ID);

	function setClosed() {
		burger?.classList.remove("is-active");
		menu?.classList.remove("is-active");
	}

	function setOpen() {
		burger?.classList.add("is-active");
		menu?.classList.add("is-active");
	}

	let isClosed = true;
	burger?.addEventListener("click", () => {
		if (isClosed) {
			setOpen();
		} else {
			setClosed();
		}
		isClosed = !isClosed;
	});
</script>